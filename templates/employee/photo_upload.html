{% extends '_base.html' %}
{% load static i18n thumbnail %}

{% block css %}
    <link rel="stylesheet" href="{% static 'css/photo-upload.css' %}">
{% endblock css %}
    
{% block content %}
<div class="profile" style="background-color: #f6faff">
    <div class="container">
        <div class="row">
            <div class="profile-main">
                <div class="content-title">
                    <h2>{% blocktrans %}Photos and the copy of passport{% endblocktrans %}</h2>
                </div>
                <div class="col-md-3">
                    <div class="profile-side">
                        <div class="profile-side__title">
                            <h2>{% trans 'Personal cabinet' %}</h2>
                        </div>
                        <nav class="nav_personal d-lnk-txt">
                            <ul>
                                <li class="">
                                    <a href="{% url 'employee.profile' %}"><i class="fa fa-user"></i> {% trans 'My profile' %}</a>
                                </li>
                                <li class="">
                                    <a href="{% url 'employee.password.update' %}"><i class="fa fa-cog"></i> {% trans 'Settings' %} </a>
                                </li>
                                <li class="">
                                    <a href="#"><i class="fa fa-book"></i> {% trans 'Courses' %} </a>
                                </li>
                            </ul>
                            <div class="nav_personal__footer">
                                <a href="{% url 'logout' %}"> {% trans 'Logout' %}</a>
                            </div>
                        </nav>
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="profile-content">
                        <!-- Edit the code here -->
                        <div class="row">
                            <div class="col-md-4">
                                <h4>{% trans 'Upload copy of your passport' %}</h4>
                                <div class="kv-passport">
                                    <div class="file-loading">
                                        <input id="passport" name="passport_image" type="file" required>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2"></div>
                            <div class="col-md-6">
                                <h4>{% trans 'Upload your avatar and extra photos if needed' %}</h4>
                                <div class="photos-human__main">
                                    <div class="row">
                                        <input type="text" value="{{ id }}" name="lookup_field" style="display: none;">
                                        <div class="col-md-6">
                                            <div class="avatar-upload humanAvatar1">
                                                <div class="avatar-edit">
                                                    <input type='file' name="photo_1" id="photo_1" accept=".png, .jpg, .jpeg" />
                                                    <label for="photo_1"></label>
                                                </div>
                                                {% if employee.photo_1 %}
                                                <a data-fancybox href="#">
                                                    <div class="avatar-preview">
                                                        <div id="passportPreview" style="background-image: url('{{ employee.photo_1.url }}');">
                                                        </div>
                                                    </div>
                                                </a>
                                                {% else %}
                                                <a data-fancybox href="#">
                                                    <div class="avatar-preview">
                                                        <div id="passportPreview">
                                                        </div>
                                                    </div>
                                                </a>
                                                <div class="avatar-upload__button">
                                                    <div class="pasport-icon photos4">
                                                        <img style="width: 75px;" src="{% static 'images/upload_icon.png' %}">
                                                    </div>
                                                    <label class="humanUpload1Button">{% trans 'Photo' %} 1</label>
                                                </div>
                                                <label class="humanUpload1Button humanCameraEdit__icon"></label>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="avatar-upload humanAvatar2">
                                                <div class="avatar-edit">
                                                    <input type='file' name="photo_2" id="photo_2" accept=".png, .jpg, .jpeg" />
                                                    <label for="photo_2"></label>
                                                </div>
                                                {% if employee.photo_2 %}
                                                <a data-fancybox href="#">
                                                    <div class="avatar-preview">
                                                        <div id="passportPreview" style="background-image: url('{{ employee.photo_2.url }}');">
                                                        </div>
                                                    </div>
                                                </a>
                                                {% else %}
                                                <a data-fancybox href="#">
                                                    <div class="avatar-preview">
                                                        <div id="passportPreview">
                                                        </div>
                                                    </div>
                                                </a>
                                                <div class="avatar-upload__button">
                                                    <div class="pasport-icon photos4">
                                                        <img style="width: 75px;" src="{% static 'images/upload_icon.png' %}">
                                                    </div>
                                                    <label class="humanUpload1Button">{% trans 'Photo' %} 2</label>
                                                </div>
                                                <label class="humanUpload1Button humanCameraEdit__icon"></label>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="avatar-upload humanAvatar3">
                                                <div class="avatar-edit">
                                                    <input type='file' name="photo_3" id="photo_3" accept=".png, .jpg, .jpeg" />
                                                    <label for="photo_3"></label>
                                                </div>
                                                {% if employee.photo_3 %}
                                                <a data-fancybox href="#">
                                                    <div class="avatar-preview">
                                                        <div id="passportPreview" style="background-image: url('{{ employee.photo_3.url }}');">
                                                        </div>
                                                    </div>
                                                </a>
                                                {% else %}
                                                <a data-fancybox href="#">
                                                    <div class="avatar-preview">
                                                        <div id="passportPreview">
                                                        </div>
                                                    </div>
                                                </a>
                                                <div class="avatar-upload__button">
                                                    <div class="pasport-icon photos4">
                                                        <img style="width: 75px;" src="{% static 'images/upload_icon.png' %}">
                                                    </div>
                                                    <label class="humanUpload1Button">{% trans 'Photo' %} 3</label>
                                                </div>
                                                <label class="humanUpload1Button humanCameraEdit__icon"></label>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="avatar-upload humanAvatar4">
                                                <div class="avatar-edit">
                                                    <input type='file' name="photo_4" id="photo_4" accept=".png, .jpg, .jpeg" />
                                                    <label for="photo_4"></label>
                                                </div>
                                                {% if employee.photo_4 %}
                                                <a data-fancybox href="#">
                                                    <div class="avatar-preview">
                                                        <div id="passportPreview" style="background-image: url('{{ employee.photo_4.url }}');">
                                                        </div>
                                                    </div>
                                                </a>
                                                {% else %}
                                                <a data-fancybox href="#">
                                                    <div class="avatar-preview">
                                                        <div id="passportPreview">
                                                        </div>
                                                    </div>
                                                </a>
                                                <div class="avatar-upload__button">
                                                    <div class="pasport-icon photos4">
                                                        <img style="width: 75px;" src="{% static 'images/upload_icon.png' %}">
                                                    </div>
                                                    <label class="humanUpload1Button">{% trans 'Photo' %} 4</label>
                                                </div>
                                                <label class="humanUpload1Button humanCameraEdit__icon"></label>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row" style="text-align: center;">
                            <button id="submit" class="loginButton" data-api="{% url 'api:employee:photo.update' %}" data-redirect="{% url 'employee.profile' %}" type="submit">
                                {% trans 'Send' %}
                            </button>  
                        </div>             
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}

{% block js %}
<script src="{% static 'plugins/fancybox/jquery.fancybox.min.js' %}"></script>
<script src="{% static 'js/photo-upload.js' %}"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
    $("#passport").fileinput({
        overwriteInitial: true,
        maxFileSize: 1500,
        showClose: false,
        showCaption: false,
        browseLabel: '',
        removeLabel: '',
        browseIcon: '<i class="glyphicon glyphicon-folder-open"></i>',
        removeIcon: '<i class="glyphicon glyphicon-remove"></i>',
        removeTitle: 'Cancel or reset changes',
        elErrorContainer: '#kv-avatar-errors-1',
        msgErrorClass: 'alert alert-block alert-danger',
        defaultPreviewContent: '<img src="{{ passport_holder }}" alt="Your passport scan" class="img-passport">',
        layoutTemplates: {main2: '{preview} {remove} {browse}'},
        allowedFileExtensions: ["jpg", "png", "gif"]
    });
})
</script>
{% endblock js %}